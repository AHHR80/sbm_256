<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه ۲ - کنترل شارژ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="status-indicator">در حال اتصال...</div>
    <div class="loading-overlay">در حال بارگذاری داده‌ها...</div>

    <div class="container">
        <header>
            <a href="/" class="back-button">&larr;</a>
            <h1>صفحه ۲: کنترل شارژ و وضعیت‌ها</h1>
            <p>برای ویرایش، روی کارت‌های قابل نوشتن کلیک کنید. برای راهنمایی، موس را روی (?) نگه دارید.</p>
        </header>
        <main class="data-grid" id="data-container">
            <div class="data-card writable" data-reg="VREG_10_0" data-current-value=""><span class="label">VREG (mV)</span><span id="VREG_10_0" class="value">--</span></div>
            <div class="data-card writable" data-reg="ICHG_8_0" data-current-value=""><span class="label">ICHG (mA)</span><span id="ICHG_8_0" class="value">--</span></div>
            <div class="data-card writable" data-reg="VINDPM_7_0" data-current-value=""><span class="label">VINDPM (mV)</span><span id="VINDPM_7_0" class="value">--</span></div>
            <div class="data-card writable" data-reg="IINDPM_8_0" data-current-value=""><span class="label">IINDPM (mA)</span><span id="IINDPM_8_0" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_ICO" data-current-value=""><span class="label">EN_ICO</span><span id="EN_ICO" class="value">--</span></div>
            <div class="data-card writable command" data-reg="FORCE_ICO" data-current-value=""><span class="label">FORCE_ICO</span><span id="FORCE_ICO" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_HIZ" data-current-value=""><span class="label">EN_HIZ</span><span id="EN_HIZ" class="value">--</span></div>
            <div class="data-card writable" data-reg="SDRV_CTRL_1_0" data-current-value=""><span class="label">SDRV_CTRL</span><span id="SDRV_CTRL_1_0" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_OTG" data-current-value=""><span class="label">EN_OTG</span><span id="EN_OTG" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_ACDRV2" data-current-value=""><span class="label">EN_ACDRV2</span><span id="EN_ACDRV2" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_ACDRV1" data-current-value=""><span class="label">EN_ACDRV1</span><span id="EN_ACDRV1" class="value">--</span></div>
            <div class="data-card writable" data-reg="DIS_ACDRV" data-current-value=""><span class="label">DIS_ACDRV</span><span id="DIS_ACDRV" class="value">--</span></div>
            <div class="data-card writable command" data-reg="FORCE_VINDPM_DET" data-current-value=""><span class="label">FORCE_VINDPM_DET</span><span id="FORCE_VINDPM_DET" class="value">--</span></div>
            <div class="data-card writable" data-reg="SFET_PRESENT" data-current-value=""><span class="label">SFET_PRESENT</span><span id="SFET_PRESENT" class="value">--</span></div>
            <div class="data-card writable" data-reg="EN_MPPT" data-current-value=""><span class="label">EN_MPPT</span><span id="EN_MPPT" class="value">--</span></div>
            <div class="data-card" data-reg="ICO_ILIM_8_0"><span class="label">ICO_ILIM (mA)</span><span id="ICO_ILIM_8_0" class="value">--</span></div>
            <div class="data-card" data-reg="AC2_PRESENT_STAT"><span class="label">AC2_PRESENT_STAT</span><span id="AC2_PRESENT_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="AC1_PRESENT_STAT"><span class="label">AC1_PRESENT_STAT</span><span id="AC1_PRESENT_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="VBATOTG_LOW_STAT"><span class="label">VBATOTG_LOW_STAT</span><span id="VBATOTG_LOW_STAT" class="value">--</span></div>
            <div class="data-card writable" data-reg="ADC_EN" data-current-value=""><span class="label">ADC_EN</span><span id="ADC_EN" class="value">--</span></div>
            <div class="data-card" data-reg="VBUS_OVP_STAT"><span class="label">VBUS_OVP_STAT</span><span id="VBUS_OVP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="VBAT_OVP_STAT"><span class="label">VBAT_OVP_STAT</span><span id="VBAT_OVP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="IBUS_OCP_STAT"><span class="label">IBUS_OCP_STAT</span><span id="IBUS_OCP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="IBAT_OCP_STAT"><span class="label">IBAT_OCP_STAT</span><span id="IBAT_OCP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="CONV_OCP_STAT"><span class="label">CONV_OCP_STAT</span><span id="CONV_OCP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="VSYS_SHORT_STAT"><span class="label">VSYS_SHORT_STAT</span><span id="VSYS_SHORT_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="VSYS_OVP_STAT"><span class="label">VSYS_OVP_STAT</span><span id="VSYS_OVP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="OTG_OVP_STAT"><span class="label">OTG_OVP_STAT</span><span id="OTG_OVP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="OTG_UVP_STAT"><span class="label">OTG_UVP_STAT</span><span id="OTG_UVP_STAT" class="value">--</span></div>
            <div class="data-card" data-reg="TSHUT_STAT"><span class="label">TSHUT_STAT</span><span id="TSHUT_STAT" class="value">--</span></div>
        </main>
    </div>
    <div id="toast"></div>
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title">ویرایش رجیستر</h3>
            <div id="modal-body"></div>
            <div class="modal-footer">
                <button id="modal-cancel" class="modal-button">لغو</button>
                <button id="modal-save" class="modal-button">ذخیره</button>
            </div>
        </div>
    </div>
    <script> window.API_ENDPOINT = '/api/data2'; </script>
    <script src="script.js"></script>
</body>
</html>
